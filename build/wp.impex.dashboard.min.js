var wp;((wp||={}).impex||={}).dashboard=(()=>{var Co=Object.create;var Te=Object.defineProperty;var vo=Object.getOwnPropertyDescriptor;var Po=Object.getOwnPropertyNames;var So=Object.getPrototypeOf,ko=Object.prototype.hasOwnProperty;var C=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var _o=(o,a,t,r)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of Po(a))!ko.call(o,n)&&n!==t&&Te(o,n,{get:()=>a[n],enumerable:!(r=vo(a,n))||r.enumerable});return o};var e=(o,a,t)=>(t=o!=null?Co(So(o)):{},_o(a||!o||!o.__esModule?Te(t,"default",{value:o,enumerable:!0}):t,o));var w=C((Ho,Ue)=>{Ue.exports=window.wp.element});var q=C(($o,He)=>{He.exports=wp.impex.debug});var I=C((qo,$e)=>{$e.exports=window.wp.components});var D=C((zo,qe)=>{qe.exports=window.wp.data});var B=C((Oo,ze)=>{ze.exports=window.wp.i18n});var M=C((Vo,Oe)=>{Oe.exports=wp.impex.store});var oe=C((Ko,Ve)=>{Ve.exports=window.wp.apiFetch});var te=C((Wo,Ke)=>{Ke.exports=window.wp.url});var z=C((Yo,We)=>{We.exports=window.wp.primitives});var Xe=C((ut,Qe)=>{Qe.exports=window.React});var Se=C((bt,Ze)=>{Ze.exports=window.wp.hooks});var ke=C((yt,eo)=>{eo.exports=wp.impex.filters});var ho=e(w(),1),bo=e(q(),1);var R=e(w(),1),m=e(I(),1),Le=e(D(),1),y=e(B(),1),go=e(q(),1),Ae=e(M(),1);var J=e(w(),1),v=e(I(),1),Ie=e(oe(),1),so=e(te(),1),fe=e(D(),1),b=e(B(),1),mo=e(q(),1);var ue=e(w()),re=e(z()),Eo=(0,ue.createElement)(re.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,ue.createElement)(re.Path,{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L13.0607 12L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L12 13.0607L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L10.9393 12L8.46967 9.53033C8.17678 9.23744 8.17678 8.76256 8.46967 8.46967C8.76256 8.17678 9.23744 8.17678 9.53033 8.46967L12 10.9393L14.4697 8.46967C14.7626 8.17678 15.2374 8.17678 15.5303 8.46967Z"})),L=Eo;var xe=e(w()),ae=e(z()),Io=(0,xe.createElement)(ae.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,xe.createElement)(ae.Path,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-4v-2.4L14 14l1-1-3-3-3 3 1 1 1.2-1.2v2.4H7.7c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4H9l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8 0 1-.8 1.8-1.7 1.8z"})),ge=Io;var we=e(w()),le=e(z()),Do=(0,we.createElement)(le.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,we.createElement)(le.Path,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"})),he=Do;var be=e(w()),ne=e(z()),Ro=(0,be.createElement)(ne.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,be.createElement)(ne.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),Ye=Ro;var A=Ye;var ye=e(w()),pe=e(z()),Fo=(0,ye.createElement)(pe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,ye.createElement)(pe.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})),Ce=Fo;var je=e(I(),1),Ge=e(D(),1),se=e(w(),1),V=e(B(),1),Je=e(M(),1);function K({value:o,onChange:a}){let{exportProfiles:t}=Ge.default.useSelect(l=>({exportProfiles:l(Je.default.KEY).getExportProfiles()})),r=se.default.useRef(),n=(l=null)=>{let p=t.find(f=>f.name===l);a(p),r.current&&(p||(r.current.selectedIndex=0),r.current.title=p?.description||"")};se.default.useEffect(()=>{n(o?.name)},[t]),se.default.useEffect(()=>{for(let l of r.current?.options??[])l.disabled||(l.title=t.find(p=>p.name===l.value)?.description)},[t]);let s=[...t];return t.length>1&&s.unshift({name:t.length?(0,V.__)("Select an export profile","cm4all-wp-impex"):(0,V.__)("No export profiles found"),disabled:!0}),window.wp.element.createElement(je.default.SelectControl,{ref:r,disabled:!t.length,value:o?.name,onChange:n,options:s.map(l=>({value:l.disabled?void 0:l.name,label:l.name,title:l.description,disabled:l.disabled})),label:(0,V.__)("Export Profile:","cm4all-wp-impex"),help:(0,V.__)("Export profiles define which WordPress data should be extracted","cm4all-wp-impex")})}var ve=e(w(),1),W=e(I(),1),mt=e(D(),1),Y=e(B(),1);function j({title:o,doSave:a,item:t,onRequestClose:r}){let[n,s]=ve.default.useState(t.name),[l,p]=ve.default.useState(t.description),f=async()=>{await a({name:n,description:l}),r()};return window.wp.element.createElement(W.default.Modal,{title:o,icon:A,onRequestClose:()=>r()},window.wp.element.createElement(W.default.TextControl,{label:(0,Y.__)("Name","cm4all-wp-impex"),help:(0,Y.__)("Name should be short and human readable","cm4all-wp-impex"),value:n,onChange:s}),window.wp.element.createElement(W.default.TextareaControl,{label:(0,Y.__)("Description","cm4all-wp-impex"),help:(0,Y.__)("Description may contain more expressive information describing the item","cm4all-wp-impex"),value:l,onChange:p}),window.wp.element.createElement(W.default.Button,{variant:"primary",onClick:f,disabled:n===t.name&&l===t.description},"Save"))}var Pe=e(I(),1);var gt=e(Xe(),1);function me({title:o,doDelete:a,onRequestClose:t,children:r}){let n=async()=>{await a(),t()};return window.wp.element.createElement(Pe.default.Modal,{title:o,icon:L,onRequestClose:()=>t()},window.wp.element.createElement("p",null,r),window.wp.element.createElement(Pe.default.Button,{variant:"primary",isDestructive:!0,onClick:n},"Delete"))}var Ee=e(w(),1),oo=e(q(),1),_e=e(Se(),1),G=e(ke(),1),to=e(M(),1),ro=e(oe(),1),ao=e(D(),1),lo=e(te(),1),ie=oo.default.default("wp.impex.dashboard.export");ie("loaded");var no=Ee.default.createContext();function N(){return Ee.default.useContext(no)}ScreenContext={normalizeFilename(o){return o.replace(/[^a-z0-9\-_]/gi,"_").replace(/(-+)|(_+)/gi,a=>a[0]).toLowerCase().slice(-32)},currentDateString(){let o=new Date;return`${o.getFullYear()}-${("0"+(o.getMonth()+1)).slice(-2)}-${("0"+o.getDate()).slice(-2)}-${o.getHours()}-${o.getMinutes()}-${o.getSeconds()}`},async saveSlicesChunk(o,a,t){let r=await a;ie("saveSlicesChunk(chunk=%o) : %o",t,a);let n=await o.getDirectoryHandle(`chunk-${t.toString().padStart(4,"0")}`,{create:!0});return Promise.all(r.map(async(s,l)=>{let p=await n.getFileHandle(`slice-${l.toString().padStart(4,"0")}.json`,{create:!0});s=await _e.default.applyFilters(G.default.SLICE_REST_UNMARSHAL,G.default.NAMESPACE,s,l,n);let f=await p.createWritable();await f.write(JSON.stringify(s,null,"  ")),ie("slice(=%o) = %o",l,s),await f.close()}))},async _getSliceFilesToImport(o){let a=[];for await(let t of o.values())if(t.kind==="directory")for await(let r of t.values())r.kind==="file"&&r.name.match(/^slice-\d+\.json$/)&&a.push({fileHandle:r,dirHandle:t});return a.sort((t,r)=>{let n=t.dirHandle.name.localeCompare(r.dirHandle.name);return n===0?t.fileHandle.name.localeCompare(r.fileHandle.name):n}),a},async _uploadSlices(o,a){let r=`${ao.default.select(to.default.KEY).getSettings().base_uri}/import/${o.id}/slice`,n=a.map(async({fileHandle:s,dirHandle:l},p)=>{let f=new FormData,x=JSON.parse(await(await s.getFile()).text());if(x=await _e.default.applyFilters(G.default.SLICE_REST_UPLOAD,G.default.NAMESPACE,x,parseInt(s.name.match(/^slice-(\d+)\.json$/)[1]),l,f),x)return ie("upload %o",{position:p,file:s.name,dir:l.name}),f.append("slice",JSON.stringify(x,null,"  ")),(0,ro.default)({method:"POST",path:lo.default.addQueryArgs(r,{position:p}),body:f,parse:!1})});await Promise.all(n)}};function po({children:o}){return window.wp.element.createElement(no.Provider,{value:ScreenContext},o)}var De=e(M(),1),io=mo.default.default("wp.impex.dashboard.export");io("loaded");function Re(){let{settings:o,exportProfiles:a,exports:t}=fe.default.useSelect(d=>{let c=d(De.default.KEY);return{settings:c.getSettings(),exportProfiles:c.getExportProfiles(),exports:c.getExports()}}),[r,n]=J.default.useState();J.default.useEffect(()=>{a.length===1&&n(a[0])},[a]);let{createExport:s,updateExport:l,deleteExport:p}=fe.default.useDispatch(De.default.KEY),[f,x]=J.default.useState(null),[_,h]=J.default.useState(null),P=N(),{currentUser:S}=fe.default.useSelect(d=>({currentUser:d("core").getCurrentUser()})),U=async()=>{let d=new URL(o.site_url),c=P.currentDateString(),k=`${d.hostname}-${r.name}-${c}`,H=`Export '${r.name}' created by user '${S.name}' at ${c}`;h({component:window.wp.element.createElement(v.default.Modal,{title:(0,b.__)("Creating snapshot","cm4all-wp-impex"),onRequestClose:()=>{},overlayClassName:"blocking"},"value",window.wp.element.createElement("progress",{indeterminate:"true"}))}),await s(r,k,H),h()},F=async d=>{let c=null;try{c=P.normalizeFilename(d.name)}catch{return}let H=await(await window.showDirectoryPicker({startIn:"downloads",mode:"readwrite",id:"impex-export-dir"})).getDirectoryHandle(c,{create:!0});io("download export %o",d);let Z=`${o.base_uri}/export/${d.id}/slice`;h({component:window.wp.element.createElement(v.default.Modal,{title:(0,b.__)("Downloading snapshot","cm4all-wp-impex"),onRequestClose:()=>{},overlayClassName:"blocking"},window.wp.element.createElement("progress",{indeterminate:"true"}))});let i=await(0,Ie.default)({path:Z,parse:!1}),E=Number.parseInt(i.headers.get("X-WP-Total"),10),O=Number.parseInt(i.headers.get("X-WP-TotalPages")),ee=[P.saveSlicesChunk(H,i.json(),1)];for(let $=2;$<=O;$++)ee.push(P.saveSlicesChunk(H,(0,Ie.default)({path:so.default.addQueryArgs(Z,{page:$})}),$));await Promise.all(ee),h(null)};return window.wp.element.createElement(window.wp.element.Fragment,null,window.wp.element.createElement(v.default.Panel,{className:"export",header:(0,b.__)("Export","cm4all-wp-impex")},window.wp.element.createElement(v.default.PanelBody,{title:(0,b.__)("Create snapshot","cm4all-wp-impex"),opened:!0,className:"create-export-form"},window.wp.element.createElement(K,{value:r,onChange:n}),window.wp.element.createElement(v.default.Button,{isPrimary:!0,onClick:U,disabled:!r},(0,b.__)("Create Snapshot","cm4all-wp-impex"))),t.map((d,c)=>window.wp.element.createElement(v.default.PanelBody,{key:d.id,title:d.name,initialOpen:c===0},window.wp.element.createElement(v.default.PanelRow,null,window.wp.element.createElement(v.default.Button,{isSecondary:!0,onClick:()=>F(d),icon:he},(0,b.__)("Download snapshot","cm4all-wp-impex")),window.wp.element.createElement(v.default.DropdownMenu,{label:(0,b.__)("Additional actions on this export","cm4all-wp-impex"),controls:[{title:(0,b.__)("Edit","cm4all-wp-impex"),icon:A,onClick:()=>x({component:j,props:{title:(0,b.__)("Edit export","cm4all-wp-impex"),async doSave(k){await l(d.id,k)},item:d}})},{title:(0,b.__)("Delete","cm4all-wp-impex"),icon:L,onClick:()=>x({component:me,props:{title:(0,b.__)("Delete export","cm4all-wp-impex"),children:window.wp.element.createElement(window.wp.element.Fragment,null,(0,b.__)("Are you really sure to delete export"),window.wp.element.createElement("code",null,d.name),"?"),async doDelete(){await p(d.id)}}})}]})),window.wp.element.createElement(v.default.PanelRow,null,window.wp.element.createElement("pre",null,JSON.stringify(d,null,"  ")))))),f&&window.wp.element.createElement(f.component,{...f.props,onRequestClose:x}),_&&window.wp.element.createElement(v.default.Fill,{name:"progress",onRequestClose:()=>{}},_.component))}var T=e(w(),1),g=e(I(),1),ce=e(D(),1),Mt=e(te(),1),u=e(B(),1),Nt=e(Se(),1),Ut=e(ke(),1),uo=e(q(),1),$t=e(oe(),1);var Dt=e(I(),1),fo=e(D(),1),de=e(w(),1),co=e(M(),1),Q=e(B(),1);function X({value:o,onChange:a}){let{importProfiles:t}=fo.default.useSelect(l=>({importProfiles:l(co.default.KEY).getImportProfiles()})),r=de.default.useRef(),n=(l=null)=>{let p=t.find(f=>f.name===l);a(p),r.current&&(p||(r.current.selectedIndex=0),r.current.title=p?.description||"")};de.default.useEffect(()=>{n(o?.name)},[t]),de.default.useEffect(()=>{for(let l of r.current?.options??[])l.disabled||(l.title=t.find(p=>p.name===l.value)?.description)},[t]);let s=[...t];return t.length>1&&s.unshift({name:t.length?(0,Q.__)("Select an import profile","cm4all-wp-impex"):(0,Q.__)("No import profiles found"),disabled:!0}),window.wp.element.createElement(wp.components.SelectControl,{ref:r,disabled:!t.length,label:(0,Q.__)("Import Profile:","cm4all-wp-impex"),value:o?.name,onChange:n,options:s.map(l=>({value:l.disabled?void 0:l.name,label:l.name,disabled:l.disabled})),help:(0,Q.__)("Import profiles define which WordPress data should be consumed","cm4all-wp-impex")})}var Fe=e(M(),1),Be=uo.default.default("wp.impex.dashboard.import");Be("loaded");function Me(){let{currentUser:o}=ce.default.useSelect(i=>({currentUser:i("core").getCurrentUser()})),{settings:a,importProfiles:t,imports:r}=ce.default.useSelect(i=>{let E=i(Fe.default.KEY);return{settings:E.getSettings(),importProfiles:E.getImportProfiles(),imports:E.getImports()}}),{createImport:n,updateImport:s,deleteImport:l,consumeImport:p}=ce.default.useDispatch(Fe.default.KEY),[f,x]=T.default.useState(null),[_,h]=T.default.useState(null),P=N(),[S,U]=T.default.useState(),[F,d]=T.default.useState(!0),[c,k]=T.default.useState(!0);T.default.useEffect(()=>{t.length===1&&U(t[0])},[t]);let H=async i=>{Be("onConsumeImport(%o)",i),h({component:window.wp.element.createElement(g.default.Modal,{title:(0,u.__)("Importing data into WordPress ...","cm4all-wp-impex"),onRequestClose:()=>{},overlayClassName:"blocking"},window.wp.element.createElement("progress",{indeterminate:"true"}))}),await p(i.id,{"impex-import-option-cleanup_contents":F},null,null),h()},Z=async()=>{let i=null;try{i=await window.showDirectoryPicker({startIn:"downloads",id:"impex-import-dir"})}catch{return}Be("upload export %o",i.name);let E=P.currentDateString(),O=i.name,ee=`Import '${i.name}' created by user '${o.name}' at ${E}`;h({component:window.wp.element.createElement(g.default.Modal,{title:(0,u.__)("Uploading snapshot","cm4all-wp-impex"),onRequestClose:()=>{},overlayClassName:"blocking"},window.wp.element.createElement("progress",{indeterminate:"true"}))});let $=(await n(O,ee,S,{})).payload,yo=await P._getSliceFilesToImport(i),To=await P._uploadSlices($,yo);h()};return window.wp.element.createElement(window.wp.element.Fragment,null,window.wp.element.createElement(g.default.Panel,{className:"import",header:(0,u.__)("Import","cm4all-wp-impex")},window.wp.element.createElement(g.default.PanelBody,{title:(0,u.__)("Upload snapshot to WordPress","cm4all-wp-impex"),opened:!0,className:"upload-import-form"},window.wp.element.createElement(X,{value:S,onChange:U}),window.wp.element.createElement(g.default.Button,{isPrimary:!0,onClick:Z,icon:Ce,disabled:!S},(0,u.__)("Upload snapshot","cm4all-wp-impex"))),window.wp.element.createElement(g.default.PanelBody,{title:(0,u.__)("Import options","cm4all-wp-impex"),opened:!0,className:"import-options-form"},window.wp.element.createElement(g.default.ToggleControl,{help:F?(0,u.__)("Clean up existing post, page, block pattern, nav_menu an reusable block items","cm4all-wp-impex"):(0,u.__)("Keep existing post, page, block pattern, nav_menu an reusable block items.","cm4all-wp-impex"),checked:F,onChange:d,label:(0,u.__)("Remove existing content before importing uploaded snapshot","cm4all-wp-impex")}),window.wp.element.createElement(g.default.ToggleControl,{help:c?(0,u.__)("Clean up existing media like images and videos (located at WordPress uploads)","cm4all-wp-impex"):(0,u.__)("Keep existing media items. Media might be partly overwritten by export","cm4all-wp-impex"),checked:c,disabled:!r.length,onChange:k,label:(0,u.__)("Remove existing media before import","cm4all-wp-impex")})),r.map((i,E)=>window.wp.element.createElement(g.default.PanelBody,{key:i.id,title:i.name,initialOpen:E===0},window.wp.element.createElement(g.default.PanelRow,null,window.wp.element.createElement(g.default.Button,{isDestructive:!0,isPrimary:!0,onClick:()=>H(i),icon:ge},(0,u.__)("Import uploaded snapshot","cm4all-wp-impex")),window.wp.element.createElement(g.default.DropdownMenu,{label:(0,u.__)("Additional actions on this import","cm4all-wp-impex"),controls:[{title:(0,u.__)("Edit","cm4all-wp-impex"),icon:A,onClick:()=>x({component:j,props:{title:(0,u.__)("Edit import snapshot","cm4all-wp-impex"),async doSave(O){await s(i.id,O)},item:i}})},{title:(0,u.__)("Delete","cm4all-wp-impex"),icon:L,onClick:()=>x({component:me,props:{title:(0,u.__)("Delete import","cm4all-wp-impex"),children:window.wp.element.createElement(window.wp.element.Fragment,null,(0,u.__)("Are you really sure to delete import","cm4all-wp-impex"),window.wp.element.createElement("code",null,i.name),"?"),async doDelete(){await l(i.id)}}})}]})),window.wp.element.createElement(g.default.PanelRow,null,window.wp.element.createElement("pre",{style:{overflow:"auto"}},JSON.stringify(i,null,"  ")))))),f&&window.wp.element.createElement(f.component,{...f.props,onRequestClose:x}),_&&window.wp.element.createElement(g.default.Fill,{name:"progress",onRequestClose:()=>{}},_.component))}var Ne=go.default.default("wp.impex.dashboard.screen");Ne("loaded");var Bo=typeof window.showDirectoryPicker=="function",Mo=typeof window?.crypto?.randomUUID=="function";function Lo(){return window.wp.element.createElement(m.default.Flex,{direction:"row",align:"top"},window.wp.element.createElement(m.default.FlexItem,{isBlock:!0},window.wp.element.createElement(Re,null)),window.wp.element.createElement(m.default.FlexItem,{isBlock:!0},window.wp.element.createElement(Me,null)))}async function xo(o,a,t){try{for await(let r of o)switch(r.type){case"progress":a({component:window.wp.element.createElement(m.default.Modal,{title:r.title,onRequestClose:()=>{},overlayClassName:"blocking"},r.message,window.wp.element.createElement("progress",{indeterminate:"true"}))});break;case"info":o.next(new Promise(n=>{a({component:window.wp.element.createElement(m.default.Modal,{title:r.title,onRequestClose:()=>n(),overlayClassName:"blocking"},r.message)})}));break}a(null)}catch(r){Ne(r),a({component:window.wp.element.createElement(m.default.Modal,{title:r.title||t,onRequestClose:()=>a(null),overlayClassName:"blocking fault"},r.message.split(`
`).map((n,s)=>window.wp.element.createElement("p",{key:s},n)),window.wp.element.createElement(m.default.Flex,{direction:"row",justify:"flex-end"},window.wp.element.createElement(m.default.Button,{isPrimary:!0,onClick:()=>a(null)},(0,y.__)("OK","cm4all-wp-impex"))))})}}function Ao(){let o=N(),{exportProfiles:a,importProfiles:t}=Le.default.useSelect(c=>{let k=c(Ae.default.KEY);return{exportProfiles:k.getExportProfiles(),importProfiles:k.getImportProfiles()}}),{createAndDownloadExport:r,createAndUploadConsumeImport:n}=Le.default.useDispatch(Ae.default.KEY),[s,l]=R.default.useState();R.default.useEffect(()=>{a.length===1&&l(a[0])},[a]);let[p,f]=R.default.useState();R.default.useEffect(()=>{t.length===1&&f(t[0])},[t]);let[x,_]=R.default.useState(null),[h,P]=R.default.useState(!0),[S,U]=R.default.useState(!0),F=async()=>{console.log({importProfile:p,screenContext:o});let c=await n(p,{"impex-import-option-cleanup_contents":h,"impex-import-option-cleanup_media":S},o);await xo(c,_,(0,y.__)("Import failed","cm4all-wp-impex"))},d=async()=>{console.log({exportProfile:s,screenContext:o});let c=await r(s,o);await xo(c,_,(0,y.__)("Export failed","cm4all-wp-impex"))};return Ne({exportProfile:s,importProfile:p,_createAndDownloadExport:d}),window.wp.element.createElement(window.wp.element.Fragment,null,window.wp.element.createElement(m.default.Flex,{direction:"row",align:"top"},window.wp.element.createElement(m.default.FlexItem,{isBlock:!0},window.wp.element.createElement(m.default.Panel,{className:"export"},window.wp.element.createElement(m.default.PanelBody,{opened:!0,className:"create-export-form"},window.wp.element.createElement(K,{value:s,onChange:l}),window.wp.element.createElement(m.default.Button,{variant:"primary",disabled:!s,onClick:d},"Export")))),window.wp.element.createElement(m.default.FlexItem,{isBlock:!0},window.wp.element.createElement(m.default.Panel,{className:"import"},window.wp.element.createElement(m.default.PanelBody,{opened:!0,className:"upload-import-form"},window.wp.element.createElement(X,{value:p,onChange:f}),window.wp.element.createElement(m.default.ToggleControl,{help:h?(0,y.__)("Clean up existing post, page, block pattern, nav_menu an reusable block items","cm4all-wp-impex"):(0,y.__)("Keep existing post, page, block pattern, nav_menu an reusable block items.","cm4all-wp-impex"),checked:h,onChange:P,label:(0,y.__)("Remove existing content before import","cm4all-wp-impex")}),window.wp.element.createElement(m.default.ToggleControl,{help:S?(0,y.__)("Clean up existing media like images and videos (located at WordPress uploads)","cm4all-wp-impex"):(0,y.__)("Keep existing items. Media might be partly overwritten by export","cm4all-wp-impex"),checked:S,onChange:U,label:(0,y.__)("Remove existing media before import","cm4all-wp-impex")}),window.wp.element.createElement(m.default.Button,{isDestructive:!0,isPrimary:!0,disabled:!p,onClick:F},"Import"))))),x&&window.wp.element.createElement(m.default.Fill,{name:"progress",onRequestClose:()=>{}},x.component))}function wo(){return window.wp.element.createElement("div",null,window.wp.element.createElement("h1",null,(0,y.__)("ImpEx","cm4all-wp-impex")),window.wp.element.createElement(m.default.SlotFillProvider,null,window.wp.element.createElement(m.default.TabPanel,{tabs:[{name:"basic",title:(0,y.__)("Basic","cm4all-wp-impex")},{name:"advanced",title:(0,y.__)("Advanced","cm4all-wp-impex")}]},o=>o.name==="advanced"?window.wp.element.createElement(Lo,null):window.wp.element.createElement(Ao,null)),window.wp.element.createElement(m.default.Slot,{name:"progress"}),!Bo&&window.wp.element.createElement(m.default.Modal,{title:"Ouch - your browser does not support the File System Access API :-(",isDismissible:!1},window.wp.element.createElement("p",null,"ImpEx Import / Export requires a browser implementing the"," ",window.wp.element.createElement("a",{href:"https://web.dev/file-system-access/"},"File System Access API"),"."),window.wp.element.createElement("p",null,"Currently only Chromium based browsers like Chrome, Chromium, MS Edge are known to support this feature."),window.wp.element.createElement("p",null,"See"," ",window.wp.element.createElement("a",{href:"https://caniuse.com/mdn-api_window_showdirectorypicker"},"here")," ","to find the latest list of browsers supporting the"," ",window.wp.element.createElement("a",{href:"https://web.dev/file-system-access/"},"File System Access API")," ","feature.")),!Mo&&window.wp.element.createElement(m.default.Modal,{title:"Ouch - your browser does not support the Crypto API :-(",isDismissible:!1},window.wp.element.createElement("p",null,"ImpEx Import / Export requires a browser implementing the"," ",window.wp.element.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Crypto"},"Browser Crypto API"),"."))))}var No=bo.default.default("wp.impex.dashboard");No("loaded");document.querySelector(".notice.notice-error")||ho.default.render(window.wp.element.createElement(po,null,window.wp.element.createElement(wo,null)),document.getElementById("cm4all_wp_impex_wp_admin_dashboard"));})();
